(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{920:function(e,n,o){"use strict";o.r(n);o(238);var t=o(28),r=o(2),l=o(66),d=o.n(l),c=function e(){Object(t.a)(this,e),this.email="",this.password="",this.passwordConfirm="",this.nickname="",this.type="login"},m=r.default.extend({data:function(){return{userLogin:new c,alerts:[],processing:!1}},computed:{isCheckedLogin:function(){return"login"===this.$data.userLogin.type}},mounted:function(){},methods:{onLogin:function(){var e=this;this.processing=!0;var n=this.userLogin;d.a.User.loginWithEmail(n.email,n.password).then((function(n){e.$router.push({name:"index"}),e.processing=!1})).catch((function(n){var o=n.message;e.alerts.push({dismissible:!0,variant:"danger",show:5,fade:!0,content:o}),e.processing=!1}))},onRegister:function(){var e,n=this;this.processing=!0;var o=this.userLogin;if(o.password!==o.passwordConfirm)e="重复密码不匹配",this.processing=!1;else{var t=new d.a.User;t.setEmail(o.email),t.setUsername(o.email),t.setPassword(o.password),t.set("nickname",o.nickname),t.signUp().then((function(e){n.$router.push({name:"index"}),n.processing=!1})).catch((function(e){var o=e.message;n.alerts.push({dismissible:!0,variant:"danger",show:5,fade:!0,content:o}),n.processing=!1}))}e&&this.alerts.push({dismissible:!0,variant:"danger",show:5,fade:!0,content:e})},onDismissed:function(e,n){this.alerts.splice(n,1)}}}),f=o(53),component=Object(f.a)(m,(function(){var e=this,n=e.$createElement,o=e._self._c||n;return o("b-container",[o("b-row",{staticClass:"text-center"},[o("b-form-radio-group",{staticClass:"mx-auto",attrs:{buttons:""},model:{value:e.userLogin.type,callback:function(n){e.$set(e.userLogin,"type",n)},expression:"userLogin.type"}},[o("b-form-radio",{attrs:{value:"login"}},[e._v("\n        登录\n      ")]),e._v(" "),o("b-form-radio",{attrs:{value:"register"}},[e._v("\n        注册\n      ")])],1)],1),e._v(" "),o("b-form",{on:{submit:function(n){n.preventDefault(),e.isCheckedLogin?e.onLogin():e.onRegister()}}},[o("b-form-group",{attrs:{id:"gLoginEmail",label:"邮箱：","label-for":"loginEmail"}},[o("b-form-input",{attrs:{id:"loginEmail",type:"email",placeholder:"输入邮箱",required:""},model:{value:e.userLogin.email,callback:function(n){e.$set(e.userLogin,"email",n)},expression:"userLogin.email"}})],1),e._v(" "),e.isCheckedLogin?e._e():o("b-form-group",{attrs:{id:"gLoginNickname",label:"昵称","label-for":"loginNickname"}},[o("b-form-input",{attrs:{id:"loginNickname",type:"text",placeholder:"输入昵称",required:""},model:{value:e.userLogin.nickname,callback:function(n){e.$set(e.userLogin,"nickname",n)},expression:"userLogin.nickname"}})],1),e._v(" "),o("b-form-group",{attrs:{id:"gLoginPassword",label:"密码","label-for":"loginPassword"}},[o("b-form-input",{attrs:{id:"loginPassword",placeholder:"输入密码",type:"password",required:""},model:{value:e.userLogin.password,callback:function(n){e.$set(e.userLogin,"password",n)},expression:"userLogin.password"}})],1),e._v(" "),e.isCheckedLogin?e._e():o("b-form-group",{attrs:{id:"gLoginPasswordConfirm",label:"重复密码：","label-for":"loginPasswordConfirm"}},[o("b-form-input",{attrs:{id:"loginPasswordConfirm",placeholder:"输入重复密码",type:"password",required:""},model:{value:e.userLogin.passwordConfirm,callback:function(n){e.$set(e.userLogin,"passwordConfirm",n)},expression:"userLogin.passwordConfirm"}})],1),e._v(" "),o("b-button",{attrs:{type:"submit",variant:"primary",disabled:e.processing}},[e._v("\n      "+e._s(e.isCheckedLogin?"登录":"注册")+"\n    ")])],1),e._v(" "),o("div",{staticClass:"alert-container position-fixed"},e._l(e.alerts,(function(a,n){return o("b-alert",{key:n,attrs:{dismissible:!!a.dismissible&&a.dismissible,"dismiss-label":a.dismissLabel?a.dismissLabel:"Close",fade:!!a.fade&&a.fade,variant:a.variant?a.variant:"info"},on:{dismissed:function(o){return e.onDismissed(a,n)}},model:{value:a.show,callback:function(n){e.$set(a,"show",n)},expression:"a.show"}},[e._v("\n      "+e._s(a.content)+"\n    ")])})),1)],1)}),[],!1,null,null,null);n.default=component.exports},932:function(e,n,o){"use strict";o.r(n);var t=o(2).default.extend({}),r=o(53),component=Object(r.a)(t,(function(){var e=this.$createElement,n=this._self._c||e;return n("b-container",[n("Login")],1)}),[],!1,null,null,null);n.default=component.exports;installComponents(component,{Login:o(920).default})}}]);
//# sourceMappingURL=aaab6e7.js.map