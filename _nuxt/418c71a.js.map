{"version":3,"sources":["webpack:///./components/VoiceCard.vue?3778","webpack:///./components/VoiceCard.vue?bae9","webpack:///./components/VoiceCard.vue?b3cf","webpack:///./components/VoiceCard.vue?407e","webpack:///./components/VoiceCard.vue?ca5c","webpack:///./components/VoiceCard.vue?c521","webpack:///./components/VoiceCard.vue","webpack:///./pages/bar.vue?0335","webpack:///./pages/bar.vue?4fe1","webpack:///./pages/bar.vue?9ada","webpack:///./pages/bar.vue"],"names":["content","module","i","locals","exports","add","default","___CSS_LOADER_API_IMPORT___","push","extend","props","voices","type","Array","data","playingName","playingLoaded","playingPlayed","voiceClicks","timeCounter","undefined","watch","mounted","methods","playAudio","v","clearInterval","this","filename","audio","$refs","src","load","setInterval","progressSet","incClick","error","$sentry","captureException","progress","event","target","play","timeupdate","buffered","length","end","duration","currentTime","ended","showProgress","obj","parseJSON","increment","save","fetchWhenSave","then","a","clickPV","get","catch","component","_vm","_h","$createElement","_c","_self","staticClass","_l","key","name","attrs","class","on","$event","_v","_e","_s","text","ref","Promise","all","fetchAudios","audioBase","query","Query","limit","descending","find","forEach","g","p","URL","toString","toFullJSON","installComponents","VoiceCard"],"mappings":"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","file":"418c71a.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceCard.vue?vue&type=style&index=0&id=21696792&scoped=true&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"4e2fc36e\", content, true, {\"sourceMap\":false});","export * from \"-!../node_modules/vue-style-loader/index.js??ref--3-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceCard.vue?vue&type=style&index=0&id=21696792&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".voice-progress[data-v-21696792]{display:block;position:absolute;width:100%;height:100%;left:0;top:0;z-index:-1}.voiceCard .button-trans[data-v-21696792]{opacity:.9;color:#000}.badge-corner[data-v-21696792]{position:absolute;right:-.5em;top:-.5em;background-color:#4d5b6d!important;color:#fff!important}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"voiceCard\"},[_vm._l((_vm.voices),function(a){return _c('b-card',{key:a.name,attrs:{\"header\":a.name}},_vm._l((a.voices),function(v){return _c('b-button',{key:v.filename,staticClass:\"text-nowrap m-1 position-relative\",class:_vm.showProgress(v) ? 'button-trans' : '',on:{\"click\":function($event){return _vm.playAudio(v)}}},[(_vm.showProgress(v))?_c('div',{staticClass:\"voice-progress\"},[_c('b-progress',{attrs:{\"max\":\"100\",\"height\":\"100%\"}},[_c('b-progress-bar',{attrs:{\"value\":_vm.playingPlayed,\"variant\":\"primary\",\"striped\":\"\",\"animated\":\"\"}}),_vm._v(\" \"),_c('b-progress-bar',{attrs:{\"value\":_vm.playingLoaded - _vm.playingPlayed,\"variant\":\"secondary\",\"striped\":\"\",\"animated\":\"\"}})],1)],1):_vm._e(),_vm._v(\" \"),_c('div',[_c('span',[_vm._v(_vm._s(v.text))]),_vm._v(\" \"),_c('b-badge',{staticClass:\"badge-corner\",attrs:{\"variant\":\"light\",\"pill\":\"\"}},[_vm._v(\"\\n          \"+_vm._s(v.clickPV)+\"\\n        \")])],1)])}),1)}),_vm._v(\" \"),_c('audio',{ref:\"audio\",attrs:{\"preload\":\"auto\"},on:{\"progress\":_vm.progress,\"canplaythrough\":_vm.play,\"timeupdate\":_vm.timeupdate,\"ended\":_vm.ended,\"loadeddata\":_vm.progress,\"loadedmetadata\":_vm.progress}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--12-0!../node_modules/ts-loader/index.js??ref--12-1!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceCard.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--12-0!../node_modules/ts-loader/index.js??ref--12-1!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoiceCard.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport AV from 'leancloud-storage'\n\nexport declare type Voice = {\n  filename: string,\n  src: string,\n  text: string,\n  clickPV: number,\n  obj: any\n}\n\nexport declare type VoiceGroup = {\n  name: string,\n  voices: Voice[]\n}\n\ndeclare type VoiceClick = {\n  name: string,\n  clickPV?: number\n}\n\nexport default Vue.extend({\n  props: {\n    voices: {\n      type: Array,\n      default () {\n        return []\n      }\n    }\n  },\n  data () {\n    const voiceClicks: VoiceClick[] = []\n    const timeCounter: any = undefined\n    return {\n      playingName: '',\n      playingLoaded: 0,\n      playingPlayed: 0,\n      voiceClicks,\n      timeCounter\n    }\n  },\n  watch: {\n  },\n  mounted () {\n  },\n  methods: {\n    playAudio (v: Voice) {\n      try {\n        clearInterval(this.timeCounter)\n        this.timeCounter = undefined\n        this.playingLoaded = 0\n        this.playingPlayed = 0\n        this.playingName = v.filename\n        const audio = this.$refs.audio as any\n        audio.src = v.src\n        audio.load()\n        this.timeCounter = setInterval(() => {\n          this.progressSet(this.$refs.audio)\n        }, 100)\n        this.incClick(v)\n      } catch (error) {\n        this.$sentry.captureException(error)\n      }\n    },\n    progress (event: any) {\n      try {\n        const audio = event.target\n        this.progressSet(audio)\n      } catch (error) {\n        this.$sentry.captureException(error)\n      }\n    },\n    play (event: any) {\n      event.target.play()\n    },\n    timeupdate (event: any) {\n      const audio = event.target\n      this.progressSet(audio)\n    },\n    progressSet (audio: any) {\n      const buffered = audio.buffered.length > 0 ? audio.buffered.end(0) : 0\n      this.playingLoaded = 100 * buffered / audio.duration\n      this.playingPlayed = 100 * audio.currentTime / audio.duration\n    },\n    ended () {\n      this.playingLoaded = 100\n      this.playingPlayed = 100\n      this.playingName = ''\n      this.playingLoaded = 0\n      this.playingPlayed = 0\n      clearInterval(this.timeCounter)\n      this.timeCounter = undefined\n    },\n    showProgress (v: any) {\n      return this.playingName === v.filename\n    },\n    incClick (v: Voice) {\n      const obj = AV.parseJSON(v.obj)\n      obj.increment('click_pv')\n      obj.save(null, {\n        fetchWhenSave: true\n      }).then((a: any) => {\n        v.clickPV = a.get('click_pv')\n      }).catch((error) => {\n        this.$sentry.captureException(error)\n      })\n    }\n  }\n})\n","import { render, staticRenderFns } from \"./VoiceCard.vue?vue&type=template&id=21696792&scoped=true&\"\nimport script from \"./VoiceCard.vue?vue&type=script&lang=ts&\"\nexport * from \"./VoiceCard.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./VoiceCard.vue?vue&type=style&index=0&id=21696792&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"21696792\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('VoiceCard',{attrs:{\"voices\":_vm.audio}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--12-0!../node_modules/ts-loader/index.js??ref--12-1!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./bar.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--12-0!../node_modules/ts-loader/index.js??ref--12-1!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./bar.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\nimport Vue from 'vue'\nimport AV from 'leancloud-storage'\nimport { VoiceGroup, Voice } from '~/components/VoiceCard.vue'\n\nexport default Vue.extend({\n  data () {\n    const audio: VoiceGroup[] = []\n\n    return {\n      audio\n    }\n  },\n  mounted () {\n    Promise.all([\n      this.fetchAudios()\n    ]).catch((error) => {\n      this.$sentry.captureException(error)\n    })\n  },\n  methods: {\n    async fetchAudios () {\n      try {\n        const audioBase = 'http://qiniu.amemachif.ioit.pub/audio/'\n        const query = new AV.Query('Audio')\n        const res = await query.limit(1000).descending('click_pv').find()\n        res.forEach((a) => {\n          const g = this.audio.find(p => p.name === a.get('group'))\n          const v: Voice = {\n            filename: a.get('name') + '.aac',\n            src: new URL(a.get('name') + '.aac', audioBase).toString(),\n            text: a.get('text'),\n            clickPV: a.get('click_pv'),\n            obj: a.toFullJSON()\n          }\n          if (g) {\n            g.voices.push(v)\n          } else {\n            this.audio.push({\n              name: a.get('group'),\n              voices: [v]\n            })\n          }\n        })\n      } catch (error) {\n        this.$sentry.captureException(error)\n      }\n    }\n  }\n})\n","import { render, staticRenderFns } from \"./bar.vue?vue&type=template&id=5a4a9f93&\"\nimport script from \"./bar.vue?vue&type=script&lang=ts&\"\nexport * from \"./bar.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {VoiceCard: require('/home/runner/work/Killer_Bar/Killer_Bar/components/VoiceCard.vue').default})\n"],"sourceRoot":""}