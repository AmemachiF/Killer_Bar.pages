(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{438:function(t,e,n){var content=n(453);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(45).default)("2b59d052",content,!0,{sourceMap:!1})},452:function(t,e,n){"use strict";n(438)},453:function(t,e,n){(e=n(44)(!1)).push([t.i,".voice-progress[data-v-77f9ad74]{display:block;position:absolute;width:100%;height:100%;left:0;top:0;z-index:-1}.voiceCard .button-trans[data-v-77f9ad74]{opacity:.9;color:#000}.badge-corner[data-v-77f9ad74]{position:absolute;right:-.5em;top:-.5em;background-color:#4d5b6d!important;color:#fff!important}",""]),t.exports=e},478:function(t,e,n){"use strict";n.r(e);n(28);var r=n(1),o=n(142),d=n.n(o),c=r.default.extend({props:{voices:{type:Array,default:function(){return[]}}},data:function(){return{playingName:"",playingLoaded:0,playingPlayed:0,voiceClicks:[],timeCounter:void 0}},watch:{},mounted:function(){},methods:{playAudio:function(t){var e=this;clearInterval(this.timeCounter),this.timeCounter=void 0,this.playingLoaded=0,this.playingPlayed=0,this.playingName=t.filename;var audio=this.$refs.audio;audio.src=t.src,audio.load(),this.timeCounter=setInterval((function(){e.progressSet(e.$refs.audio)}),100),this.incClick(t)},progress:function(t){var audio=t.target;this.progressSet(audio)},play:function(t){t.target.play()},timeupdate:function(t){var audio=t.target;this.progressSet(audio)},progressSet:function(audio){var t=audio.buffered.length>0?audio.buffered.end(0):0;this.playingLoaded=100*t/audio.duration,this.playingPlayed=100*audio.currentTime/audio.duration},ended:function(){this.playingLoaded=100,this.playingPlayed=100,this.playingName="",this.playingLoaded=0,this.playingPlayed=0,clearInterval(this.timeCounter),this.timeCounter=void 0},showProgress:function(t){return this.playingName===t.filename},incClick:function(t){var e=d.a.parseJSON(t.obj);e.increment("click_pv"),e.save(null,{fetchWhenSave:!0}).then((function(a){t.clickPV=a.get("click_pv")}))}}}),l=(n(452),n(39)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"voiceCard"},[t._l(t.voices,(function(a){return n("b-card",{key:a.name,attrs:{header:a.name}},t._l(a.voices,(function(e){return n("b-button",{key:e.filename,staticClass:"text-nowrap m-1 position-relative",class:t.showProgress(e)?"button-trans":"",on:{click:function(n){return t.playAudio(e)}}},[t.showProgress(e)?n("div",{staticClass:"voice-progress"},[n("b-progress",{attrs:{max:"100",height:"100%"}},[n("b-progress-bar",{attrs:{value:t.playingPlayed,variant:"primary",striped:"",animated:""}}),t._v(" "),n("b-progress-bar",{attrs:{value:t.playingLoaded-t.playingPlayed,variant:"secondary",striped:"",animated:""}})],1)],1):t._e(),t._v(" "),n("div",[n("span",[t._v(t._s(e.text))]),t._v(" "),n("b-badge",{staticClass:"badge-corner",attrs:{variant:"light",pill:""}},[t._v("\n          "+t._s(e.clickPV)+"\n        ")])],1)])})),1)})),t._v(" "),n("audio",{ref:"audio",attrs:{preload:"auto"},on:{progress:t.progress,canplaythrough:t.play,timeupdate:t.timeupdate,ended:t.ended,loadeddata:t.progress,loadedmetadata:t.progress}})],2)}),[],!1,null,"77f9ad74",null);e.default=component.exports},487:function(t,e,n){"use strict";n.r(e);n(85),n(8),n(19),n(13),n(27),n(52),n(9),n(61),n(150);var r=n(1),o=n(142),d=n.n(o),c=r.default.extend({data:function(){return{audio:[]}},mounted:function(){this.fetchAudios()},methods:{fetchAudios:function(){var t=this;new d.a.Query("Audio").descending("click_pv").find().then((function(e){e.forEach((function(a){var g=t.audio.find((function(p){return p.name===a.get("group")})),e={filename:a.get("filename"),src:new URL(a.get("name")+".aac","http://qiniu.amemachif.ioit.pub/audio/").toString(),text:a.get("text"),clickPV:a.get("click_pv"),obj:a.toFullJSON()};g?g.voices.push(e):t.audio.push({name:a.get("group"),voices:[e]})}))}))}}}),l=n(39),component=Object(l.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("b-container",{attrs:{fluid:""}},[e("VoiceCard",{attrs:{voices:this.audio}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{VoiceCard:n(478).default})}}]);