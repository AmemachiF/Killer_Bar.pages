(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{438:function(t,e,n){var content=n(452);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(45).default)("7bed40b6",content,!0,{sourceMap:!1})},451:function(t,e,n){"use strict";n(438)},452:function(t,e,n){(e=n(44)(!1)).push([t.i,".voice-progress[data-v-9a9f21fa]{display:block;position:absolute;width:100%;height:100%;left:0;top:0;z-index:-1}.voiceCard .button-trans[data-v-9a9f21fa]{opacity:.9;color:#000}.badge-corner[data-v-9a9f21fa]{position:absolute;right:-.5em;top:-.5em;background-color:#4d5b6d!important;color:#fff!important}",""]),t.exports=e},475:function(t,e,n){"use strict";n.r(e);n(85),n(8),n(19),n(9);var o=n(1),r=n(142),c=n.n(r),l=o.default.extend({props:{voices:{type:Array,default:function(){return[]}}},data:function(){return{playingName:"",playingLoaded:0,playingPlayed:0,voiceClicks:[]}},watch:{voices:function(){this.fetchClick()}},mounted:function(){this.fetchClick()},methods:{playAudio:function(t){this.playingLoaded=0,this.playingPlayed=0,this.playingName=t.filename;var audio=this.$refs.audio;audio.src=t.src,audio.load(),this.incClick(t)},progress:function(t){var audio=t.target;this.progressSet(audio)},play:function(t){t.target.play()},timeupdate:function(t){var audio=t.target;this.progressSet(audio)},progressSet:function(audio){var t=audio.buffered.length>0?audio.buffered.end(0):0;this.playingLoaded=100*t/audio.duration,this.playingPlayed=100*audio.currentTime/audio.duration},ended:function(){this.playingName="",this.playingLoaded=0,this.playingPlayed=0},showProgress:function(t){return this.playingName===t.filename},incClick:function(t){var e=this,n=new c.a.Query("Audio");n.equalTo("filename",t.filename),n.first().then((function(audio){if(audio){if(!(audio instanceof c.a.Object))return;audio.increment("click_pv")}else(audio=new c.a.Object("Audio")).set("filename",t.filename),audio.set("click_pv",1);audio.save(null,{fetchWhenSave:!0}).then((function(a){var n=e.voiceClicks.find((function(p){return p.name===t.filename})),o=a.get("filename"),r=a.get("click_pv");n?n.clickPV=r:e.voiceClicks.push({name:o,clickPV:r})}))}))},fetchClick:function(){var t=this;new c.a.Query("Audio").find().then((function(e){e.forEach((function(a){var e=a.get("filename"),n=a.get("click_pv"),o=t.voiceClicks.find((function(p){return p.name===e}));o?o.clickPV=n:t.voiceClicks.push({name:e,clickPV:n})}))}))},getClick:function(t,e){var n=this.voiceClicks.find((function(p){return p.name===t}));return n&&e in n?n[e]:0}}}),d=(n(451),n(39)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"voiceCard"},[t._l(t.voices,(function(a){return n("b-card",{key:a.name,attrs:{header:a.name}},t._l(a.voices,(function(e){return n("b-button",{key:e.filename,staticClass:"text-nowrap m-1 position-relative",class:t.showProgress(e)?"button-trans":"",on:{click:function(n){return t.playAudio(e)}}},[t.showProgress(e)?n("div",{staticClass:"voice-progress"},[n("b-progress",{attrs:{max:"100",height:"100%"}},[n("b-progress-bar",{attrs:{value:t.playingPlayed,variant:"primary"}}),t._v(" "),n("b-progress-bar",{attrs:{value:t.playingLoaded-t.playingPlayed,variant:"secondary"}})],1)],1):t._e(),t._v(" "),n("div",[n("span",[t._v(t._s(e.text))]),t._v(" "),n("b-badge",{staticClass:"badge-corner",attrs:{variant:"light",pill:""}},[t._v("\n          "+t._s(t.getClick(e.filename,"clickPV"))+"\n        ")])],1)])})),1)})),t._v(" "),n("audio",{ref:"audio",attrs:{preload:"auto"},on:{progress:t.progress,canplaythrough:t.play,timeupdate:t.timeupdate,ended:t.ended,loadeddata:t.progress,loadedmetadata:t.progress}})],2)}),[],!1,null,"9a9f21fa",null);e.default=component.exports},483:function(t,e,n){"use strict";n.r(e);n(8),n(13),n(27),n(52),n(9),n(61),n(150);var o=n(1).default.extend({data:function(){return{audio:[]}},mounted:function(){this.fetchAudios()},methods:{fetchAudios:function(){var t=this;this.$axios.get("https://api.amemachif.com:2333/audio").then((function(e){if(2e4===e.data.code){e.data.data.forEach((function(g){var e={name:g.group,voices:[]};g.content.forEach((function(a){e.voices.push({filename:a.src,text:a.text,src:new URL(a.src,"https://api.amemachif.com:2333/static/").toString()})})),t.audio.push(e)}))}})).catch((function(t){}))}}}),r=n(39),component=Object(r.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("b-container",{attrs:{fluid:""}},[e("VoiceCard",{attrs:{voices:this.audio}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{VoiceCard:n(475).default})}}]);